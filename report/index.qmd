---
title: Análise de Dados da ONG Passos Mágicos
authors:
  - name: Carlos Eduardo Veras Neves
    affiliation: FIAP - 3DTAT
    roles: writing
    corresponding: true
bibliography: references.bib
---

```{r setup, include=F}
# | echo: false 

library(tidyverse)
library(ggplot2)
library(plm)

```

```{r}
#| echo: false

df_model_complete <- read_csv('../data/df_model_complete.csv') 
df_model_complete_clean <- read_csv('../data/df_model_complete_tratado.csv')

```

# Introdução

This is a simple placeholder for the manuscript's main document [@knuth84].

# Análise Exploratória

```{r}
#colnames(df_model_complete)
#
df <- df_model_complete_clean |> mutate(nome = df_model_complete$nome)  

```

```{r}
fe_model <-  plm(inde ~ anos_pm + fem + bolsista + ponto_virada +
                    ipv_pre_processado_resultado + 
                    ieg_pre_processado_resultado +
                    ida_pre_processado_resultado + 
                    rec_ava_1_pre_processado_resultado +
                    rec_ava_2_pre_processado_resultado + 
                    rec_ava_3_pre_processado_resultado +
<<<<<<< HEAD
                    rec_ava_4_pre_processado_resultado + in_fase, 
=======
                    rec_ava_4_pre_processado_resultado, 
>>>>>>> 382e3e86e0eeaf289b4aaa007dfab154ce1b2f16
                    data = df,
                    index = c("nome", "ano"), 
                    model = "within")


```

```{r}
lmtest::coeftest(fe_model, vcov. = vcovHC, type = "HC1")

```
<<<<<<< HEAD
```{r}
re_model <-  plm(inde ~ anos_pm + fem + bolsista + ponto_virada +
                    ipv_pre_processado_resultado + 
                    ieg_pre_processado_resultado +
                    ida_pre_processado_resultado + 
                    rec_ava_1_pre_processado_resultado +
                    rec_ava_2_pre_processado_resultado + 
                    rec_ava_3_pre_processado_resultado +
                    rec_ava_4_pre_processado_resultado + in_fase, 
                    data = df,
                    index = c("nome", "ano"), 
                    model = "random")

=======

```{r}
library(AER)
```

```{r}
cor(df_model_complete_clean)

```


```{r}

df_2022 <- subset(df, ano == 2022)

ivmodel <- ivreg(inde ~ bolsista + fem + ponto_virada +
                   ipv_pre_processado_resultado + ieg_pre_processado_resultado +
                    ida_pre_processado_resultado 
                 | ieg + ida + ipv + ieg + iaa + ips + 
                   ipp + ian + + rec_ava_1_pre_processado_resultado +
                    rec_ava_2_pre_processado_resultado + rec_ava_3_pre_processado_resultado +
                    rec_ava_4_pre_processado_resultado +
                     pedra, 
                  data = df_2022)
```

```{r}
coeftest(ivmodel, vcov = vcovHC, type = "HC1")

```

```{r}
lm(inde ~  bolsista, 
                  data = df_2022)
>>>>>>> 382e3e86e0eeaf289b4aaa007dfab154ce1b2f16

```

```{r}
lmtest::coeftest(re_model, vcov. = vcovHC, type = "HC1")

```

```{r}
teste_hausman <- phtest(fe_model, re_model)

print(teste_hausman)

```




```{r}
library(AER)
```

```{r}
cor(df_model_complete_clean)

```


```{r}

df_2022 <- subset(df, ano == 2020)

ivmodel <- ivreg(inde ~ anos_pm + fem + bolsista + ponto_virada +
                    ipv_pre_processado_resultado + 
                    ieg_pre_processado_resultado +
                    ida_pre_processado_resultado + 
                    rec_ava_1_pre_processado_resultado +
                    rec_ava_2_pre_processado_resultado + 
                    rec_ava_3_pre_processado_resultado +
                    rec_ava_4_pre_processado_resultado + in_fase 
                 | ieg + ida + ipv + ieg + iaa + ips + 
                   ipp + ian + + rec_ava_1_pre_processado_resultado +
                    rec_ava_2_pre_processado_resultado + rec_ava_3_pre_processado_resultado +
                    rec_ava_4_pre_processado_resultado +
                     pedra, 
                  data = df_2022)
```

```{r}
coeftest(ivmodel, vcov = vcovHC, type = "HC1")

```

```{r}
lm(inde ~  bolsista, 
                  data = df_2022)

```

